package com.abc.abcmart.service;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertNotNull;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;

import java.time.LocalDate;

import org.junit.jupiter.api.Test;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.springframework.boot.test.context.SpringBootTest;

import com.abc.abcmart.entity.Customer;
import com.abc.abcmart.entity.Order;
import com.abc.abcmart.repository.OrderRepository;

@SpringBootTest
public class OrderServiceTest {

	@InjectMocks
	private OrderServiceImpl orderService;
	
	@Mock
	private OrderRepository orderRepository;
	
	@Mock
	private CustomerService customerService;
	
	@Mock
	private ProductService productService;
	
	@Test
    public void testSaveOrder() {
		Customer customer = new Customer();
		
		Order order = new Order();
		order.setOrderDate (LocalDate.of(2000, 10, 10));
		order.setOrderStatus ("pending");
		order.setCustomer (customer);
		
		when(orderRepository.save(order)).thenReturn(order);
		
		Order savedOrder = orderService.saveOrder(order);
		 
		assertNotNull(savedOrder);
		assertEquals("pending",savedOrder.getOrderStatus());
		
		verify(orderRepository).save(order);
	}
}
